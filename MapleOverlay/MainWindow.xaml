<Window x:Class="MapleOverlay.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MapleOverlay" 
        Height="450" Width="800"
        Background="Transparent" 
        AllowsTransparency="True" 
        WindowStyle="None"
        Topmost="True" 
        ShowInTaskbar="False">
    
    <Grid>
        <!-- 1. 정보 패널 -->
        <Border x:Name="InfoPanel" 
                Width="300"
                MaxHeight="600"
                Background="#CC000000" 
                CornerRadius="10" 
                HorizontalAlignment="Left" 
                VerticalAlignment="Top"
                Visibility="Hidden">
            
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- 내용 영역 (스크롤 가능) -->
                <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto" Margin="5,5,5,0" MaxHeight="500">
                    <StackPanel Margin="10">
                        <!-- 아이템 이름 -->
                        <TextBlock x:Name="ItemNameText" Text="아이템명" Foreground="#FFCC00" FontSize="18" FontWeight="Bold" TextWrapping="Wrap"/>
                        
                        <Separator Margin="0,10" Background="#555555"/>
                        
                        <!-- REQ 정보 -->
                        <TextBlock x:Name="ItemReqText" Text="" Foreground="#FF9900" FontSize="12" TextWrapping="Wrap" Visibility="Collapsed"/>
                        
                        <Separator x:Name="ReqSeparator" Margin="0,8" Background="#444444" Visibility="Collapsed"/>

                        <!-- 아이템 옵션 -->
                        <TextBlock x:Name="ItemStatsText" Text="" Foreground="White" FontSize="13" LineHeight="20" TextWrapping="Wrap"/>
                        
                        <Separator x:Name="DescSeparator" Margin="0,10" Background="#555555" Visibility="Collapsed"/>
                        
                        <!-- 아이템 설명 -->
                        <TextBlock x:Name="ItemDescText" Text="설명" Foreground="#AAAAAA" FontSize="11" TextWrapping="Wrap" FontFamily="Consolas"/>
                    </StackPanel>
                </ScrollViewer>

                <!-- [추가] 수동 검색 영역 (하단 고정) -->
                <Border Grid.Row="1" Margin="10" Background="#33FFFFFF" CornerRadius="5" Padding="5">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <TextBox x:Name="SearchInput" 
                                 Grid.Column="0" 
                                 Height="25" 
                                 VerticalContentAlignment="Center"
                                 Background="Transparent" 
                                 Foreground="White" 
                                 BorderThickness="0"
                                 CaretBrush="White"
                                 KeyDown="SearchInput_KeyDown"
                                 Text="직접 검색..."/>
                        
                        <Button x:Name="SearchButton" 
                                Grid.Column="1" 
                                Content="검색" 
                                Width="50" 
                                Height="25" 
                                Margin="5,0,0,0"
                                Click="SearchButton_Click"
                                Background="#444444"
                                Foreground="White"
                                BorderThickness="0"/>
                    </Grid>
                </Border>
            </Grid>
        </Border>

        <!-- 2. 캡처 모드용 오버레이 -->
        <Canvas x:Name="CaptureCanvas" 
                Background="#01000000" 
                Visibility="Collapsed"
                MouseDown="CaptureCanvas_MouseDown"
                MouseMove="CaptureCanvas_MouseMove"
                MouseUp="CaptureCanvas_MouseUp">
            
            <Rectangle x:Name="SelectionRect"
                       Stroke="#00FF00"
                       StrokeThickness="2"
                       Fill="#3300FF00"
                       Visibility="Collapsed"/>
        </Canvas>
    </Grid>
</Window>